<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#6C63FF">
    
    <!-- Ícones para iOS -->
    <link rel="apple-touch-icon" href="/icon-192x192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <title>Redação Nota 1000</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <style>
        :root {
            --primary: #6C63FF;
            --primary-light: #8A85FF;
            --secondary: #FF6584;
            --dark: #2D3748;
            --light: #F7FAFC;
            --gray: #E2E8F0;
            --dark-gray: #718096;
            --success: #48BB78;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Tela inicial - apenas o botão */
        .initial-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            z-index: 100;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .initial-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .view-essay-btn {
            background: white;
            color: var(--primary);
            border: none;
            padding: 1.2rem 2.5rem;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: var(--transition);
            outline: none;
        }

        .view-essay-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .view-essay-btn:active {
            transform: translateY(1px);
        }

        /* Botão de instalação */
        #installBtn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--secondary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            display: none;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            transition: var(--transition);
        }

        #installBtn:hover {
            transform: translateY(-2px);
            background: #FF4D6D;
        }

        /* Conteúdo principal (inicialmente escondido) */
        .main-content {
            display: none;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .main-content.visible {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Estilos do conteúdo */
        .essay-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .essay-title {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .essay-text {
            white-space: pre-line;
            line-height: 1.8;
        }

        .analysis-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .section-title {
            color: var(--primary);
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            font-weight: 600;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .section-title::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background-color: var(--secondary);
            border-radius: 3px;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .input-field {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--gray);
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            transition: var(--transition);
            resize: vertical;
            min-height: 100px;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.2);
        }

        .submit-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: block;
            margin: 0 auto;
        }

        .submit-btn:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        /* Tela de comparação */
        .comparison-container {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .comparison-column {
            flex: 1;
            min-width: 300px;
        }

        .column-title {
            color: var(--dark);
            margin-bottom: 1rem;
            font-size: 1.2rem;
            font-weight: 600;
            text-align: center;
            padding: 0.5rem;
            border-radius: 8px;
        }

        .user-column .column-title {
            background-color: rgba(108, 99, 255, 0.1);
            color: var(--primary);
        }

        .correct-column .column-title {
            background-color: rgba(72, 187, 120, 0.1);
            color: var(--success);
        }

        .answer-item {
            margin-bottom: 1.5rem;
        }

        .answer-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark-gray);
        }

        .answer-text {
            background-color: var(--gray);
            padding: 1rem;
            border-radius: 8px;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .correct-answer {
            background-color: rgba(72, 187, 120, 0.1);
            border-left: 4px solid var(--success);
        }

        .next-btn {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: block;
            margin: 0 auto;
        }

        .next-btn:hover {
            background-color: #FF4D6D;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .main-content {
                padding: 1rem;
            }
            
            .essay-card, .analysis-card {
                padding: 1.5rem;
            }
            
            .comparison-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .submit-btn, .next-btn {
                width: 100%;
            }

            #installBtn {
                bottom: 10px;
                right: 10px;
                padding: 10px 15px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Tela inicial - apenas o botão -->
    <div class="initial-screen" id="initialScreen">
        <button class="view-essay-btn" id="viewEssayBtn">Ver Redação</button>
    </div>

    <!-- Botão de instalação flutuante -->
    <button id="installBtn">Instalar App</button>

    <!-- Conteúdo principal (inicialmente escondido) -->
    <div class="main-content" id="mainContent">
        <!-- Tela de Exercício -->
        <div id="exerciseScreen">
            <div class="essay-card">
                <h2 class="essay-title" id="essayTitle"></h2>
                <div class="essay-text" id="essayText"></div>
            </div>

            <div class="analysis-card">
                <h2 class="section-title">Analise a Redação</h2>
                
                <div class="input-group">
                    <label class="input-label" for="thesis">Qual a tese da redação?</label>
                    <textarea class="input-field" id="thesis" placeholder="Digite a tese apresentada na redação..."></textarea>
                </div>
                
                <div class="input-group">
                    <label class="input-label" for="arguments">Quais são os argumentos utilizados?</label>
                    <textarea class="input-field" id="arguments" placeholder="Liste os argumentos, separando por vírgulas..."></textarea>
                </div>
                
                <div class="input-group">
                    <label class="input-label" for="intervention">Qual a proposta de intervenção?</label>
                    <textarea class="input-field" id="intervention" placeholder="Descreva a proposta de intervenção apresentada..."></textarea>
                </div>
                
                <div class="input-group">
                    <label class="input-label" for="connectors">Quais conectivos foram utilizados?</label>
                    <textarea class="input-field" id="connectors" placeholder="Liste os conectivos encontrados, separando por vírgulas..."></textarea>
                </div>
                
                <button class="submit-btn" id="showAnswerBtn">Mostrar Gabarito</button>
            </div>
        </div>

        <!-- Tela de Comparação -->
        <div id="comparisonScreen" style="display: none;">
            <div class="essay-card">
                <h2 class="essay-title" id="compareEssayTitle"></h2>
                <div class="essay-text" id="compareEssayText"></div>
            </div>

            <div class="analysis-card">
                <h2 class="section-title">Comparação com o Gabarito</h2>
                
                <div class="comparison-container">
                    <div class="comparison-column user-column">
                        <h3 class="column-title">Suas Respostas</h3>
                        
                        <div class="answer-item">
                            <span class="answer-label">Tese:</span>
                            <div class="answer-text" id="userThesis"></div>
                        </div>
                        
                        <div class="answer-item">
                            <span class="answer-label">Argumentos:</span>
                            <div class="answer-text" id="userArguments"></div>
                        </div>
                        
                        <div class="answer-item">
                            <span class="answer-label">Proposta de Intervenção:</span>
                            <div class="answer-text" id="userIntervention"></div>
                        </div>
                        
                        <div class="answer-item">
                            <span class="answer-label">Conectivos:</span>
                            <div class="answer-text" id="userConnectors"></div>
                        </div>
                    </div>
                    
                    <div class="comparison-column correct-column">
                        <h3 class="column-title">Gabarito Oficial</h3>
                        
                        <div class="answer-item">
                            <span class="answer-label">Tese:</span>
                            <div class="answer-text correct-answer" id="correctThesis"></div>
                        </div>
                        
                        <div class="answer-item">
                            <span class="answer-label">Argumentos:</span>
                            <div class="answer-text correct-answer" id="correctArguments"></div>
                        </div>
                        
                        <div class="answer-item">
                            <span class="answer-label">Proposta de Intervenção:</span>
                            <div class="answer-text correct-answer" id="correctIntervention"></div>
                        </div>
                        
                        <div class="answer-item">
                            <span class="answer-label">Conectivos:</span>
                            <div class="answer-text correct-answer" id="correctConnectors"></div>
                        </div>
                    </div>
                </div>
                
                <button class="next-btn" id="nextEssayBtn">Próxima Redação</button>
            </div>
        </div>
    </div>

    <script>
        // Banco de dados de redações
        const essaysDatabase = [
            {
                title: "Desafios da Educação no Brasil",
                text: `A educação é um dos pilares fundamentais para o desenvolvimento de qualquer sociedade. No Brasil, apesar dos avanços nas últimas décadas, ainda existem desafios significativos que precisam ser superados para garantir um ensino de qualidade para todos.\n\nEm primeiro lugar, é preciso considerar a desigualdade social que afeta diretamente o acesso à educação. Enquanto escolas particulares oferecem infraestrutura adequada e professores bem remunerados, muitas instituições públicas sofrem com a falta de recursos básicos. Essa disparidade cria um abismo educacional entre diferentes classes sociais.\n\nAlém disso, a formação docente é outro ponto crítico. Muitos professores, especialmente nas regiões mais pobres do país, não recebem capacitação adequada nem condições de trabalho satisfatórias. Consequentemente, o processo de ensino-aprendizagem fica comprometido, prejudicando o desenvolvimento dos estudantes.\n\nDiante desse cenário, é essencial que o governo federal, em parceria com estados e municípios, invista na melhoria da infraestrutura escolar e na valorização dos professores. Paralelamente, programas de assistência estudantil devem ser ampliados para garantir que todos os jovens possam permanecer na escola. Somente com essas medidas será possível construir um sistema educacional mais justo e eficiente.`,
                thesis: "A educação no Brasil enfrenta desafios significativos que impedem o ensino de qualidade para todos.",
                arguments: "1. Desigualdade social no acesso à educação\n2. Formação docente inadequada\n3. Condições precárias de trabalho para professores",
                intervention: "Investimento governamental em infraestrutura escolar, valorização dos professores e ampliação de programas de assistência estudantil.",
                connectors: "Em primeiro lugar, Além disso, Consequentemente, Diante desse cenário, Paralelamente"
            },
            {
                title: "Consumo Sustentável na Sociedade Moderna",
                text: `Nos últimos anos, o consumo desenfreado tem se tornado um problema global, com impactos ambientais cada vez mais evidentes. Nesse contexto, a adoção de práticas sustentáveis de consumo surge como uma necessidade urgente para preservar os recursos naturais do planeta.\n\nUm dos principais problemas é a cultura do descartável, que gera quantidades absurdas de lixo diariamente. Produtos com vida útil curta e embalagens excessivas contribuem para o acúmulo de resíduos que muitas vezes não são reciclados. Esse padrão de consumo precisa ser revisto com urgência.\n\nOutro aspecto preocupante é a pegada ecológica da produção industrial. Muitos bens de consumo demandam grande quantidade de energia e matéria-prima em sua fabricação, além de gerarem poluição. Portanto, reduzir o consumo desses produtos é fundamental para diminuir os danos ao meio ambiente.\n\nPara enfrentar esses desafios, é necessário que governos criem políticas de incentivo à economia circular e à produção sustentável. Ao mesmo tempo, as escolas devem educar as novas gerações sobre consumo consciente. Já as empresas precisam assumir sua responsabilidade social, desenvolvendo produtos ecologicamente corretos. Com essas ações conjuntas, será possível construir um futuro mais sustentável.`,
                thesis: "O consumo desenfreado é um problema global que exige a adoção urgente de práticas sustentáveis.",
                arguments: "1. Cultura do descartável gera excesso de lixo\n2. Pegada ecológica da produção industrial\n3. Necessidade de revisão dos padrões de consumo",
                intervention: "Políticas governamentais de incentivo à economia circular, educação escolar sobre consumo consciente e responsabilidade social das empresas.",
                connectors: "Um dos principais problemas, Outro aspecto preocupante, Portanto, Para enfrentar esses desafios, Ao mesmo tempo, Já as empresas"
            }
        ];

        // Variáveis de estado
        let currentEssayIndex = 0;

        // Elementos da DOM
        const initialScreen = document.getElementById('initialScreen');
        const viewEssayBtn = document.getElementById('viewEssayBtn');
        const mainContent = document.getElementById('mainContent');
        const exerciseScreen = document.getElementById('exerciseScreen');
        const comparisonScreen = document.getElementById('comparisonScreen');
        const showAnswerBtn = document.getElementById('showAnswerBtn');
        const nextEssayBtn = document.getElementById('nextEssayBtn');
        const essayTitle = document.getElementById('essayTitle');
        const essayText = document.getElementById('essayText');
        const compareEssayTitle = document.getElementById('compareEssayTitle');
        const compareEssayText = document.getElementById('compareEssayText');
        const thesisInput = document.getElementById('thesis');
        const argumentsInput = document.getElementById('arguments');
        const interventionInput = document.getElementById('intervention');
        const connectorsInput = document.getElementById('connectors');
        const userThesis = document.getElementById('userThesis');
        const userArguments = document.getElementById('userArguments');
        const userIntervention = document.getElementById('userIntervention');
        const userConnectors = document.getElementById('userConnectors');
        const correctThesis = document.getElementById('correctThesis');
        const correctArguments = document.getElementById('correctArguments');
        const correctIntervention = document.getElementById('correctIntervention');
        const correctConnectors = document.getElementById('correctConnectors');
        const installBtn = document.getElementById('installBtn');

        // Event Listeners
        viewEssayBtn.addEventListener('click', showMainContent);
        showAnswerBtn.addEventListener('click', showComparison);
        nextEssayBtn.addEventListener('click', nextEssay);

        // Funções
        function showMainContent() {
            initialScreen.classList.add('hidden');
            mainContent.classList.add('visible');
            loadCurrentEssay();
        }

        function loadCurrentEssay() {
            const currentEssay = essaysDatabase[currentEssayIndex];
            essayTitle.textContent = currentEssay.title;
            essayText.textContent = currentEssay.text;
            compareEssayTitle.textContent = currentEssay.title;
            compareEssayText.textContent = currentEssay.text;
            
            thesisInput.value = '';
            argumentsInput.value = '';
            interventionInput.value = '';
            connectorsInput.value = '';
            
            exerciseScreen.style.display = 'block';
            comparisonScreen.style.display = 'none';
        }

        function showComparison() {
            const currentEssay = essaysDatabase[currentEssayIndex];
            
            userThesis.textContent = thesisInput.value || "(Não respondido)";
            userArguments.textContent = argumentsInput.value || "(Não respondido)";
            userIntervention.textContent = interventionInput.value || "(Não respondido)";
            userConnectors.textContent = connectorsInput.value || "(Não respondido)";
            
            correctThesis.textContent = currentEssay.thesis;
            correctArguments.textContent = currentEssay.arguments;
            correctIntervention.textContent = currentEssay.intervention;
            correctConnectors.textContent = currentEssay.connectors;
            
            exerciseScreen.style.display = 'none';
            comparisonScreen.style.display = 'block';
        }

        function nextEssay() {
            currentEssayIndex = (currentEssayIndex + 1) % essaysDatabase.length;
            loadCurrentEssay();
        }

        // Código para instalação do PWA
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.style.display = 'block';
            
            // Forçar mostra o botão mesmo se o evento não disparar
            setTimeout(() => {
                if (!deferredPrompt) {
                    installBtn.style.display = 'block';
                    installBtn.textContent = 'Instalar (Clique Aqui)';
                }
            }, 15000); // 15 segundos
        });

        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    console.log('Usuário aceitou a instalação');
                    installBtn.style.display = 'none';
                }
                deferredPrompt = null;
            } else {
                // Fallback para navegadores que não suportam beforeinstallprompt
                alert('Para instalar o app, use o menu de compartilhamento do seu navegador e selecione "Adicionar à tela inicial"');
            }
        });

        // Verificar se o app já está instalado
        window.addEventListener('appinstalled', () => {
            installBtn.style.display = 'none';
            console.log('PWA foi instalado');
        });

        // Registrar Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registrado com sucesso:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Falha ao registrar ServiceWorker:', error);
                    });
            });
        }

        // Carrega a primeira redação
        loadCurrentEssay();
    </script>
</body>
</html>